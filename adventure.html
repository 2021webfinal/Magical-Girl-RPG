<html>
	<head>
		<title>冒險測試</title>
		<style>
			.ml3 {
			  font-weight: 90;
			  font-size: 2em;
			  color: blue;
			}
			.ctbox {
				border: solid 5px green;
				background-color: lightgreen;
				height: 250px;
				width: 500px;
				overflow:scroll;
			　	display:inline;
			}
			#canvas {width: 250px;
                     border: 1px solid #999999;
                     border-collapse: collapse 
					 }
            td      { width: 2px; height: 2px; margin: 0px; padding: 0px; }
            .blue   { background-color: blue; }
            .red    { background-color: red; }
            .black  { background-color: black;}
            .white  { background-color: white;}
		</style>
		<script src="https://cdnjs.cloudflare.com/ajax/libs/animejs/2.0.2/anime.min.js"></script>
	</head>
	<body>
		<div id="hellow"></div>
		<a href="player_content.html">
		<table id = "canvas" onmousemove="mapp(event)">
			<tbody id="headbox"></tbody>
		</table></a>
		<div id="worldmap" >
			<div id="map1" onmousemove="map1i(event)"><a href="level1.html" id="passlv1">光遠程設</a></div>
			<div id="map2" onmousemove="map2i(event)">機率論</div>
			<div id="map3" onmousemove="map3i(event)">微積分</div>
			<a href="start_page.html"><div id="home" onmousemove="hi(event)">回家</div></a>
		</div>
		
		　<div class="ctbox">
			<p id="chatbox" class="ml3">你好我是對話框</p>
		</div>
		<script>
			var talk = document.getElementById("chatbox");
			var tmp_chat = 0;
			var player_name=localStorage.getItem("start_adventure");
			function amt(){
				var textWrapper = document.querySelector('.ml3');
				textWrapper.innerHTML = textWrapper.textContent.replace(/\S/g, "<span class='letter'>$&</span>");
				anime.timeline({loop: false})
				.add({
					targets: '.ml3 .letter',
					opacity: [0,1],
					easing: "easeInOutQuad",
					duration: 10,
					delay: (el, i) => 150 * (i+1)
				});
			}
			function mapp(e) {
				if(tmp_chat!=5){
					talk.innerHTML = "看"+player_name+"的詳細數值";
					amt();
				}
				tmp_chat = 5;
			}
			function map1i(e) {
				if(tmp_chat!=1){
					talk.innerHTML = "前往新手教學";
					amt();
				}
				tmp_chat = 1;
			}
			function map2i(e) {
				if(tmp_chat!=2){
					talk.innerHTML = "前往第二關";
					amt();
				}
				tmp_chat = 2;
			}
			function map3i(e) {
				if(tmp_chat!=3){
					talk.innerHTML = "前往地獄";
					amt();
				}
				tmp_chat = 3;
			}
			function hi(e) {
				if(tmp_chat!=4){
					talk.innerHTML = "重新選角";
					amt();
				}
				tmp_chat = 4;
			}
			function gethead(){
				var hell=document.getElementById("hellow");
				
				hell.innerHTML="Hellow! "+player_name+"<br>";
				console.log(player_name);
				var headcode=localStorage.getItem("canvas_"+player_name);
				var tmp=document.getElementById("headbox").innerHTML=headcode;
				console.log(tmp);
			}
			function start(){
				gethead();
				amt();
				var check_level1=localStorage.getItem("&Level_1");
				var check_level2=localStorage.getItem("&Level_2");
				var check_level3=localStorage.getItem("&Level_3");
				if(check_level1=='1'){
					document.getElementById("map2").innerHTML='<a href="level2.html" id="passlv2">機率論</a>';
				}
				if(check_level2=='1'){
					document.getElementById("map3").innerHTML='<a href="level3.html" id="passlv3">微積分</a>';
				}
			}
			window.addEventListener( "load", start, false );
		</script>
	</body>
</html>
